# Wine Gallery — Спецификация проекта

## Назначение
Этот проект — веб-ориентированная галерея вин (Wine Gallery).

## Общие правила
- НЕ переписывать существующий код, если об этом прямо не просят.
- НЕ переименовывать файлы или папки.
- НЕ менять структуру проекта без разрешения.
- Все изменения должны быть минимальными и точечными.

## Правила работы с кодом
- index.html является главным входным файлом.
- Существующие папки (assets, configs, data) должны оставаться без изменений.
- Новые файлы добавляются только при необходимости.
- Никакого рефакторинга, если он не запрошен явно.

## Правила работы с данными (CSV → App mapping)
- CSV является единственным источником истины для данных о винах.
- Приложение ОБЯЗАНО маппить CSV-колонки во внутренний объект вина,
  который используется для рендера UI.
- Любые несоответствия между именами колонок CSV и полями в коде
  должны решаться через mapping (а не через переименование CSV-колонок).

### Обязательные внутренние поля (используются UI)
Каждый замапленный объект вина должен содержать:
- id
- title
- sub
- section
- sectionKey
- style
- description
- notes
- imageUrl
- priceBottle
- priceGlass
- visible (boolean)
- available (boolean)

### Текущие CSV-колонки (базовая схема Novikov / PeopleTalk)
Ожидаемые заголовки CSV включают (могут быть расширены):
- id, section, order, producer, name, vintage, country, region, grape, style,
  btg_price, bottle_price, story, notes, bottle_img, visible, is_available

Правила маппинга (базовые):
- bottle_img → imageUrl
- btg_price → priceGlass
- bottle_price → priceBottle
- story → description

Булевые значения:
- visible / is_available должны быть нормализованы
  (например: "yes"/"no", "true"/"false", "1"/"0", пустое значение).

## Правила работы с секциями (Источник истины)
- Секции управляются конфигом, а не порядком строк в CSV.
- `sectionsOrder` определяет канонический набор и порядок вкладок.
- `sectionsOrderByLang[lang]` может переопределять порядок и/или названия
  секций для конкретного языка.
- Строгое поведение: секции, отсутствующие в конфиге, скрываются.
- Сопоставление происходит по нормализованным ключам (`sectionKey`),
  чтобы избежать проблем с акцентами / пробелами / регистром.

Цепочка fallback:
1) sectionsOrderByLang[lang] (если существует и не пуст)
2) sectionsOrder (если существует и не пуст)
3) fallback к секциям, найденным в данных
   (только если конфиг не дал ни одного совпадения)

## Правила рабочего процесса
- Работать пошагово.
- Строго следовать SPEC.md и SPRINT.md.
- Если что-то неясно — сначала задать вопрос, а уже потом менять.
